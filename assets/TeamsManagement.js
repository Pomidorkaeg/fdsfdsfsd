var H=Object.defineProperty,Q=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var D=(l,r,t)=>r in l?H(l,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[r]=t,n=(l,r)=>{for(var t in r||(r={}))_.call(r,t)&&D(l,t,r[t]);if(A)for(var t of A(r))J.call(r,t)&&D(l,t,r[t]);return l},c=(l,r)=>Q(l,X(r));var y=(l,r,t)=>new Promise((p,u)=>{var N=x=>{try{g(t.next(x))}catch(j){u(j)}},b=x=>{try{g(t.throw(x))}catch(j){u(j)}},g=x=>x.done?p(x.value):Promise.resolve(x.value).then(N,b);g((t=t.apply(l,r)).next())});import{j as s,q as K,X as O,Q as V,i as W,$ as Z,m as ss,_ as Y,M as es,G as as,I as is,F as ds,p as rs}from"./ui-vendor.js";import{r as h}from"./react-vendor.js";import{u as ls,d as z,B as w}from"./index.js";import{L as o,I as m}from"./label.js";import{T as $}from"./textarea.js";import{C as G,a as ts,b as ns,c as cs,d as os}from"./card.js";import"./query.js";const Ns=()=>{const[l,r]=h.useState([]),[t,p]=h.useState(null),[u,N]=h.useState(""),[b,g]=h.useState(""),[x,j]=h.useState(""),[M,P]=h.useState({matches:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,points:0}),{toast:f}=ls();h.useEffect(()=>{R()},[]);const R=()=>y(void 0,null,function*(){try{const e=yield z.getTeams();r(e)}catch(e){console.error("Error loading teams:",e),f({variant:"destructive",title:"Ошибка",description:"Не удалось загрузить команды"})}}),B=e=>{p(e),N(e.name),g(e.description),j(e.address),P(e.stats||{matches:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,points:0})},U=()=>y(void 0,null,function*(){if(!t)return;const e=c(n({},t),{name:u,description:b,address:x,stats:M});try{yield z.updateTeam(e),r(l.map(v=>v.id===e.id?e:v)),f({title:"Команда обновлена",description:"Информация о команде успешно обновлена"}),p(null)}catch(v){f({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить изменения"})}}),q=()=>{p(null)};return s.jsxs("div",{children:[s.jsx(G,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:s.jsxs(ts,{children:[s.jsxs(ns,{className:"flex items-center",children:[s.jsx(K,{className:"h-5 w-5 mr-2 text-fc-green"}),"Управление командами"]}),s.jsx(cs,{children:"Настройка информации о командах клуба"})]})}),s.jsx("div",{className:"grid grid-cols-1 gap-8",children:l.map(e=>{var v,k,C,L,T,F,I,S,E;return s.jsx(G,{className:"overflow-hidden",children:(t==null?void 0:t.id)===e.id?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Редактирование команды"}),s.jsxs("div",{className:"space-x-2",children:[s.jsxs(w,{variant:"outline",size:"sm",onClick:q,children:[s.jsx(O,{className:"h-4 w-4 mr-1"})," Отмена"]}),s.jsxs(w,{size:"sm",onClick:U,className:"bg-fc-green hover:bg-fc-darkGreen",children:[s.jsx(V,{className:"h-4 w-4 mr-1"})," Сохранить"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"name",children:"Название команды"}),s.jsx(m,{id:"name",name:"name",value:u,onChange:d=>N(d.target.value)})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"shortName",children:"Краткое название"}),s.jsx(m,{id:"shortName",name:"shortName",value:e.shortName,onChange:d=>{const a=c(n({},e),{shortName:d.target.value});r(l.map(i=>i.id===a.id?a:i))}})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"logo",children:"URL логотипа"}),s.jsx(m,{id:"logo",name:"logo",value:e.logo,onChange:d=>{const a=c(n({},e),{logo:d.target.value});r(l.map(i=>i.id===a.id?a:i))}})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"backgroundImage",children:"URL фонового изображения"}),s.jsx(m,{id:"backgroundImage",name:"backgroundImage",value:e.backgroundImage,onChange:d=>{const a=c(n({},e),{backgroundImage:d.target.value});r(l.map(i=>i.id===a.id?a:i))}})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"primaryColor",children:"Основной цвет"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border",style:{backgroundColor:e.primaryColor}}),s.jsx(m,{id:"primaryColor",name:"primaryColor",value:e.primaryColor,onChange:d=>{const a=c(n({},e),{primaryColor:d.target.value});r(l.map(i=>i.id===a.id?a:i))}})]})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"secondaryColor",children:"Дополнительный цвет"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full border",style:{backgroundColor:e.secondaryColor}}),s.jsx(m,{id:"secondaryColor",name:"secondaryColor",value:e.secondaryColor,onChange:d=>{const a=c(n({},e),{secondaryColor:d.target.value});r(l.map(i=>i.id===a.id?a:i))}})]})]})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"description",children:"Описание"}),s.jsx($,{id:"description",name:"description",value:b,onChange:d=>g(d.target.value),rows:4})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"coach",children:"Главный тренер"}),s.jsx(m,{id:"coach",name:"coach",value:e.coach,onChange:d=>{const a=c(n({},e),{coach:d.target.value});r(l.map(i=>i.id===a.id?a:i))}})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"foundedYear",children:"Год основания"}),s.jsx(m,{id:"foundedYear",name:"foundedYear",type:"number",value:e.foundedYear,onChange:d=>{const a=c(n({},e),{foundedYear:parseInt(d.target.value)||0});r(l.map(i=>i.id===a.id?a:i))}})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"stadium",children:"Стадион"}),s.jsx(m,{id:"stadium",name:"stadium",value:e.stadium,onChange:d=>{const a=c(n({},e),{stadium:d.target.value});r(l.map(i=>i.id===a.id?a:i))}})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"address",children:"Адрес"}),s.jsx(m,{id:"address",name:"address",value:x,onChange:d=>j(d.target.value)})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"achievements",children:"Достижения (каждое с новой строки)"}),s.jsx($,{id:"achievements",name:"achievements",value:e.achievements.join(`
`),onChange:d=>{const a=c(n({},e),{achievements:d.target.value.split(`
`).filter(i=>i.trim()!=="")});r(l.map(i=>i.id===a.id?a:i))},rows:4})]}),s.jsxs("div",{className:"space-y-3 border p-4 rounded-md",children:[s.jsx(o,{children:"Социальные сети"}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"socialLinks.website",className:"text-sm",children:"Вебсайт"}),s.jsx(m,{id:"socialLinks.website",name:"socialLinks.website",value:e.socialLinks.website||"",onChange:d=>{const a=c(n({},e),{socialLinks:c(n({},e.socialLinks),{website:d.target.value})});r(l.map(i=>i.id===a.id?a:i))},placeholder:"https://example.com"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"socialLinks.instagram",className:"text-sm",children:"Instagram"}),s.jsx(m,{id:"socialLinks.instagram",name:"socialLinks.instagram",value:e.socialLinks.instagram||"",onChange:d=>{const a=c(n({},e),{socialLinks:c(n({},e.socialLinks),{instagram:d.target.value})});r(l.map(i=>i.id===a.id?a:i))},placeholder:"https://instagram.com/teamname"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"socialLinks.facebook",className:"text-sm",children:"Facebook"}),s.jsx(m,{id:"socialLinks.facebook",name:"socialLinks.facebook",value:e.socialLinks.facebook||"",onChange:d=>{const a=c(n({},e),{socialLinks:c(n({},e.socialLinks),{facebook:d.target.value})});r(l.map(i=>i.id===a.id?a:i))},placeholder:"https://facebook.com/teamname"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"socialLinks.twitter",className:"text-sm",children:"Twitter"}),s.jsx(m,{id:"socialLinks.twitter",name:"socialLinks.twitter",value:e.socialLinks.twitter||"",onChange:d=>{const a=c(n({},e),{socialLinks:c(n({},e.socialLinks),{twitter:d.target.value})});r(l.map(i=>i.id===a.id?a:i))},placeholder:"https://twitter.com/teamname"})]})]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"h-48 relative",children:[s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url('${e.backgroundImage}')`,backgroundSize:"cover",backgroundPosition:"center"}}),s.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(to right, ${e.primaryColor}DD, ${e.secondaryColor}99)`}}),s.jsxs("div",{className:"absolute inset-0 p-6 flex items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:e.logo,alt:e.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"}),s.jsxs("div",{className:"ml-6",children:[s.jsx("h3",{className:"text-3xl font-bold text-white drop-shadow-md",children:e.name}),s.jsxs("p",{className:"text-white text-opacity-90",children:["Основан в ",e.foundedYear," году"]})]})]}),s.jsxs(w,{variant:"secondary",size:"sm",onClick:()=>B(e),className:"absolute top-4 right-4 bg-white/20 backdrop-blur-sm hover:bg-white/30",children:[s.jsx(W,{className:"h-4 w-4 mr-1"})," Изменить"]})]})]}),s.jsxs(os,{className:"pt-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Z,{className:"w-5 h-5 mr-2 text-fc-green"}),s.jsx("h4",{className:"font-semibold",children:"О команде"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),s.jsxs("div",{className:"flex items-center mt-6 mb-3",children:[s.jsx(ss,{className:"w-5 h-5 mr-2 text-fc-green"}),s.jsx("h4",{className:"font-semibold",children:"Стадион"})]}),s.jsx("p",{className:"text-gray-600",children:e.stadium})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(Y,{className:"w-5 h-5 mr-2 text-fc-green"}),s.jsx("h4",{className:"font-semibold",children:"Достижения"})]}),s.jsx("ul",{className:"space-y-2",children:e.achievements.map((d,a)=>s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-fc-green mt-2 mr-2"}),s.jsx("span",{className:"text-gray-600",children:d})]},a))}),s.jsxs("div",{className:"flex items-center mt-6 mb-3",children:[s.jsx(es,{className:"w-5 h-5 mr-2 text-fc-green"}),s.jsx("h4",{className:"font-semibold",children:"Адрес"})]}),s.jsx("p",{className:"text-gray-600",children:e.address})]})]}),s.jsxs("div",{className:"mt-8 border-t pt-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Y,{className:"w-5 h-5 mr-2 text-fc-green"}),s.jsx("h4",{className:"font-semibold",children:"Статистика команды"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Матчи"}),s.jsx("div",{className:"text-2xl font-bold text-fc-green",children:((v=e.stats)==null?void 0:v.matches)||0})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Победы"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:((k=e.stats)==null?void 0:k.wins)||0})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Ничьи"}),s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:((C=e.stats)==null?void 0:C.draws)||0})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Поражения"}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:((L=e.stats)==null?void 0:L.losses)||0})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Забито"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((T=e.stats)==null?void 0:T.goalsFor)||0})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Пропущено"}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:((F=e.stats)==null?void 0:F.goalsAgainst)||0})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Разница"}),s.jsx("div",{className:"text-2xl font-bold text-gray-800",children:(((I=e.stats)==null?void 0:I.goalsFor)||0)-(((S=e.stats)==null?void 0:S.goalsAgainst)||0)})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Очки"}),s.jsx("div",{className:"text-2xl font-bold text-fc-green",children:((E=e.stats)==null?void 0:E.points)||0})]})]})]}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.socialLinks.website&&s.jsxs("div",{className:"px-3 py-1 bg-gray-100 rounded text-sm text-gray-700 flex items-center",children:[s.jsx(as,{className:"w-4 h-4 mr-1"}),"Сайт"]}),e.socialLinks.instagram&&s.jsxs("div",{className:"px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded text-sm text-white flex items-center",children:[s.jsx(is,{className:"w-4 h-4 mr-1"}),"Instagram"]}),e.socialLinks.facebook&&s.jsxs("div",{className:"px-3 py-1 bg-blue-600 rounded text-sm text-white flex items-center",children:[s.jsx(ds,{className:"w-4 h-4 mr-1"}),"Facebook"]}),e.socialLinks.twitter&&s.jsxs("div",{className:"px-3 py-1 bg-blue-400 rounded text-sm text-white flex items-center",children:[s.jsx(rs,{className:"w-4 h-4 mr-1"}),"Twitter"]})]})})]})]})},e.id)})})]})};export{Ns as default};
//# sourceMappingURL=TeamsManagement.js.map
